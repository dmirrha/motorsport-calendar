# üèÅ Motorsport Calendar Generator

Um script Python avan√ßado para coleta autom√°tica de eventos de automobilismo de m√∫ltiplas fontes e gera√ß√£o de arquivos iCal para importa√ß√£o no Google Calendar. Desenvolvido para entusiastas de automobilismo que desejam acompanhar todas as corridas do fim de semana em um s√≥ lugar.

> Nota p√≥s-rollback (0.5.1)
>
- A branch `main` foi revertida para o snapshot do commit `9362503` (PR #34). Algumas se√ß√µes abaixo podem descrever funcionalidades que ser√£o reintroduzidas em PRs futuros. O workflow de testes/CI foi reativado via GitHub Actions (`.github/workflows/tests.yml`) em 2025-08-13. Consulte `RELEASES.md` para detalhes.

## üéØ Caracter√≠sticas

- ‚úÖ **Coleta autom√°tica** de eventos de m√∫ltiplas fontes
- ‚úÖ **Interface visual colorida** com progresso em tempo real
- ‚úÖ **Detec√ß√£o inteligente** do fim de semana alvo
- ‚úÖ **Remo√ß√£o de duplicatas** entre fontes
- ‚úÖ **Configura√ß√£o flex√≠vel** via arquivo JSON
- ‚úÖ **Logging avan√ßado** com rota√ß√£o e limpeza autom√°tica
- ‚úÖ **Links de transmiss√£o** inclu√≠dos nos eventos do calend√°rio
- ‚úÖ **Arquivamento autom√°tico** de arquivos iCal antigos
- ‚úÖ **Per√≠odos de sil√™ncio** configur√°veis para filtrar eventos por hor√°rio

## Categorias Suportadas

**Suporte Din√¢mico a TODAS as Categorias de Esporte Automotor**

O script detecta automaticamente e coleta eventos de **qualquer categoria** encontrada nas fontes de dados, incluindo mas n√£o limitado a:

### Carros:
### **üèéÔ∏è Carros:**
- F√≥rmula 1, F2, F3, F4
- Stock Car Brasil, NASCAR
- IndyCar, Super F√≥rmula
- WEC (World Endurance Championship)
- IMSA, DTM, Super GT
- F√≥rmula E, Extreme E
- Rally (WRC), Rallycross
- Turismo, GT World Challenge

### **üèçÔ∏è Motos:**
- MotoGP, Moto2, Moto3
- World Superbike (WSBK)
- Supersport, Superstock
- MotoE, MotoAmerica
- British Superbike (BSB)

### **üöó Outras Modalidades:**
- Karting, Drift
- Arrancada, Autocross
- Hill Climb, Time Attack
- **E muito mais!**

> üí° **Flexibilidade Total:** O sistema se adapta automaticamente a novas categorias que apare√ßam nas fontes de dados, sem necessidade de atualiza√ß√µes no c√≥digo.

## üîá Per√≠odos de Sil√™ncio

Os per√≠odos de sil√™ncio permitem configurar intervalos de tempo durante os quais os eventos n√£o ser√£o inclu√≠dos no arquivo iCal de sa√≠da, mas ainda ser√£o exibidos nos logs para fins de monitoramento.

### Configura√ß√£o

Adicione a se√ß√£o `silent_periods` no arquivo de configura√ß√£o:

```json
{
  "general": {
    "silent_periods": [
      {
        "enabled": true,
        "name": "Noite",
        "start_time": "22:00",
        "end_time": "06:00",
        "days_of_week": ["monday", "tuesday", "wednesday", "thursday", "sunday"]
      },
      {
        "enabled": true,
        "name": "Fim de Semana",
        "start_time": "00:00",
        "end_time": "23:59",
        "days_of_week": ["saturday", "sunday"]
      }
    ]
  }
}
```

### Par√¢metros

- **`enabled`**: Ativa ou desativa o per√≠odo de sil√™ncio
- **`name`**: Nome descritivo do per√≠odo
- **`start_time`**: Hor√°rio de in√≠cio no formato HH:MM
- **`end_time`**: Hor√°rio de fim no formato HH:MM
- **`days_of_week`**: Lista de dias da semana (monday, tuesday, etc.)

### Comportamento

- Eventos que ocorrem durante per√≠odos de sil√™ncio s√£o **filtrados** do arquivo iCal
- Os eventos filtrados s√£o **registrados nos logs** com n√≠vel INFO
- Um **resumo dos eventos filtrados** √© exibido na sa√≠da do terminal
- O sistema lida corretamente com per√≠odos que **cruzam a meia-noite**

### Exemplo de Uso

```bash
# Executar com per√≠odos de sil√™ncio configurados
python3 motorsport_calendar.py --verbose
```

Os logs mostrar√£o:
```
üîá Event filtered by silent period 'Noite': F1 Practice at 2025-08-03 23:30
üîá Silent periods filtered 3 events:
  ‚Ä¢ Noite: 2 events
  ‚Ä¢ Fim de Semana: 1 events
```

## üë• Como Contribuir

Agradecemos seu interesse em contribuir para o Motorsport Calendar! Aqui est√° como voc√™ pode ajudar:

### üìù Reportando Problemas

1. **Verifique se j√° existe uma issue** relacionada ao problema
2. Se n√£o existir, cite uma nova issue seguindo nosso modelo
3. Use o template apropriado (bug report ou feature request)
4. Inclua informa√ß√µes detalhadas para reproduzir o problema

### üõ†Ô∏è Fluxo de Trabalho para Issues

#### 1. Criando uma Nova Issue

1. **Crie os arquivos necess√°rios** no diret√≥rio `.github/import_issues/open/`:
   ```bash
   # Usando os templates
   cp .github/import_issues/templates/issue_template.json open/NNN-descricao-curta.json
   cp .github/import_issues/templates/issue_template.md open/NNN-descricao-curta.md
   ```
   - `NNN` deve ser o pr√≥ximo n√∫mero sequencial dispon√≠vel (ex: 001, 002, etc.)
   - Use nomes descritivos em min√∫sculas com h√≠fens

2. **Preencha os templates** com as informa√ß√µes da issue:
   - No arquivo `.json`: Defina t√≠tulo, labels, assignees, etc.
   - No arquivo `.md`: Descreva detalhadamente a issue usando Markdown

#### 2. Importando a Issue para o GitHub

1. **Execute o script de importa√ß√£o**:
   ```bash
   cd .github/import_issues/
   python3 import_issues.py dmirrha/motorsport-calendar
   ```
   - O script ir√° solicitar confirma√ß√£o antes de cada importa√ß√£o
   - Os arquivos ser√£o movidos para a pasta `imported/` com timestamp
   - Um link para a issue ser√° exibido ap√≥s a importa√ß√£o

2. **Verifique a issue** no GitHub para garantir que foi criada corretamente

#### 3. Ap√≥s a Aprova√ß√£o do Pull Request

1. **Mova os arquivos** para a pasta `closed/`:
   ```bash
   mv .github/import_issues/imported/NNN-* .github/import_issues/closed/
   ```
   - Isso mant√©m o hist√≥rico organizado e evita duplica√ß√£o

2. **Atualize o CHANGELOG.md** com as altera√ß√µes relacionadas
   - Inclua uma breve descri√ß√£o da corre√ß√£o ou melhoria
   - Referencie o n√∫mero da issue (ex: `#123`)

#### 4. Boas Pr√°ticas

- **Nomenclatura de Arquivos**:
  - Use sempre 3 d√≠gitos (ex: `001-`, `010-`, `100-`)
  - Mantenha consist√™ncia entre os nomes dos arquivos .json e .md
  - Exemplos: 
    - `001-bug-logger-fix.json`
    - `010-feature-new-workflow.json`

- **Conte√∫do das Issues**:
  - Seja claro e objetivo no t√≠tulo
  - Inclua todos os detalhes necess√°rios para reproduzir o problema
  - Adicione screenshots ou exemplos quando relevante
  - Use formata√ß√£o Markdown para melhor legibilidade

- **Fluxo de Trabalho**:
  - Sempre crie a issue antes de come√ßar a trabalhar nela
  - Use branches descritivas baseadas no n√∫mero da issue
  - Referencie a issue nos commits (ex: `fix: corrige problema #123`)

### üèóÔ∏è Desenvolvendo Novas Funcionalidades

1. Crie uma branch a partir de `main`
   ```bash
   git checkout -b feature/nome-da-feature
   ```

2. Fa√ßa commit das suas altera√ß√µes
   ```bash
   git commit -m "feat: adiciona nova funcionalidade"
   ```

3. Envie as altera√ß√µes
   ```bash
   git push origin feature/nome-da-feature
   ```

4. Abra um Pull Request
   - Descreva as altera√ß√µes propostas
   - Referencie as issues relacionadas
   - Atualize a documenta√ß√£o conforme necess√°rio

### üìö Padr√µes de C√≥digo

- Siga o estilo de c√≥digo existente
- Inclua testes para novas funcionalidades
- Atualize a documenta√ß√£o relevante
- Mantenha os commits at√¥micos e bem descritos

## üß™ Testes

- Execu√ß√£o local:
  ```bash
  pytest -q
  ```
- Fixtures essenciais (determinismo/isolamento):
  - `freeze_datetime`: congela `datetime.now()`/`today()` nos m√≥dulos relevantes.
  - `fixed_uuid`: for√ßa `uuid.uuid4()` a retornar UUID fixo.
  - Fakes de HTTP: `_DummyResponse`/`_DummySession` com `patch_requests_get`/`patch_requests_session` (sem rede real).
- Dados de teste: `tests/data/` com exemplos m√≠nimos (ver `tests/data/README.md`).
- Guia completo: consulte `tests/README.md` para exemplos e boas pr√°ticas.

## üîß Requisitos

- **Python 3.8+**
- **Sistema Operacional**: macOS, Linux, Windows (testado principalmente no macOS)
- **Conex√£o com internet** para coleta de dados
- **Depend√™ncias**: Verifique o arquivo `requirements.txt` para a lista completa

## üì¶ Instala√ß√£o

```bash
# Clone o reposit√≥rio
git clone https://github.com/seu-usuario/motorsport-calendar.git
cd motorsport-calendar

# Crie um ambiente virtual
python -m venv venv
source venv/bin/activate

# Instale as depend√™ncias
pip install -r requirements.txt

# Configure o arquivo de configura√ß√£o
mkdir -p config
cp config/config.example.json config/config.json
# Edite config/config.json conforme necess√°rio
```

## üß™ Testes

A su√≠te utiliza Pytest com cobertura via pytest-cov. O gate de cobertura global est√° configurado em **45%**.

- Gate atual: `--cov-fail-under=45` (definido em `pytest.ini`)
- Mocks essenciais:
  - Timezone fixo `America/Sao_Paulo` e aleatoriedade determin√≠stica (`random.seed(0)`)
  - Shims de rede: `sources.tomada_tempo.requests.get` e `sources.base_source.requests.Session`
  - Isolamento de filesystem via `tmp_path`/`tmp_path_factory`
  - Vari√°veis de ambiente com `monkeypatch.setenv`/`delenv`
- Como rodar: consulte `tests/README.md` para comandos, estrutura e exemplos.

### Fase 2 ‚Äî Testes Integrados (Governan√ßa)

- √âpico: #78 ‚Äî Testes Integrados e Valida√ß√£o de ICS
- Sub-issues: #79‚Äì#86
- Documenta√ß√£o sincronizada: `docs/TEST_AUTOMATION_PLAN.md`, `CHANGELOG.md`, `RELEASES.md`
- Rastreabilidade: `docs/issues/open/issue-{78..86}.{md,json}`
 - PR: #87 (https://github.com/dmirrha/motorsport-calendar/pull/87)

Comandos r√°pidos (local):

```bash
# Su√≠te completa com cobertura e relat√≥rios
pytest --cov=src --cov=sources \
  --cov-report=term-missing:skip-covered \
  --cov-report=xml:coverage.xml --cov-report=html \
  -q --junitxml=test_results/junit.xml

# Foco em m√≥dulos cr√≠ticos
pytest -q tests/unit/utils/test_payload_manager*.py
pytest -q tests/unit/ical/test_ical_generator*.py

# Checagem de estabilidade (zero flakes)
for i in 1 2 3; do pytest -q; done
```

Cobertura e m√©tricas recentes (Fase 1.1 ‚Äî issue #59):
- `sources/tomada_tempo.py`: 63%
- Su√≠te: 101 passed; cobertura global: 40.64%

> Nota: o bug de preced√™ncia ISO vs BR em `_extract_date()` foi documentado para importa√ß√£o em lote ao final da Fase 1.1; arquivos no importador: `.github/import_issues/open/025-tomadatemposource-extract-date-parsing-precedence.{json,md}`.

Cobertura e m√©tricas recentes (Fase 1.1 ‚Äî issue #62):
- `src/ical_generator.py`: **76%**
- Su√≠te: **156 passed**; cobertura global: **51.92%**
- Novos testes: `tests/unit/ical/test_ical_generator_extended.py`
- Nota: corrigido efeito colateral de monkeypatch global em `pytz.timezone` nos testes de processamento para n√£o interferir nos testes de iCal

Cobertura e m√©tricas recentes (Fase 1.1 ‚Äî issue #63):
- Su√≠te: **170 passed**; cobertura global: **57.86%**
- Gate global: `--cov-fail-under=45`
- Novos testes: `tests/unit/category/test_category_detector_basic.py`, `tests/unit/utils/test_payload_manager_extended.py`, `tests/unit/config/test_config_manager_basic.py`

Cobertura e m√©tricas recentes (Fase 1.1 ‚Äî issue #64):
- Su√≠te: **205 passed**; cobertura global: **61.52%**
- `src/utils/payload_manager.py`: **90%**
- `src/ical_generator.py`: **93%**
- Novos testes: `tests/unit/utils/test_payload_manager_errors.py`, `tests/unit/ical/test_ical_generator_branches.py`
- Ajustes: construtor de `ICalGenerator` aceita `config_manager` (no teste) e exce√ß√£o encapsulada em `PayloadManager.save_payload` validada como `IOError`

## üöÄ Uso

```bash
# Execu√ß√£o b√°sica
python motorsport_calendar.py

# Com configura√ß√£o personalizada
python motorsport_calendar.py --config custom_config.json

# Com sa√≠da personalizada
python motorsport_calendar.py --output meu_calendario.ics

# Modo verbose
python motorsport_calendar.py --verbose
```

## üìÅ Estrutura do Projeto

```
motorsport-calendar/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ import_issues/        # Gerenciamento de issues
‚îÇ       ‚îú‚îÄ‚îÄ imported/         # Issues j√° importadas
‚îÇ       ‚îú‚îÄ‚îÄ *.json            # Issues pendentes
‚îÇ       ‚îú‚îÄ‚îÄ import_issues.py  # Script de importa√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ README.md         # Documenta√ß√£o
‚îú‚îÄ‚îÄ motorsport_calendar.py    # Script principal
‚îú‚îÄ‚îÄ config/                   # Configura√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ config.json           # Configura√ß√£o principal
‚îÇ   ‚îî‚îÄ‚îÄ config.example.json   # Exemplo de configura√ß√£o
‚îú‚îÄ‚îÄ requirements.txt          # Depend√™ncias
‚îú‚îÄ‚îÄ src/                      # C√≥digo fonte modular
‚îú‚îÄ‚îÄ sources/                  # M√≥dulos de coleta por fonte
‚îú‚îÄ‚îÄ output/                   # Arquivos iCal gerados
‚îú‚îÄ‚îÄ logs/                     # Logs e payloads
‚îî‚îÄ‚îÄ tests/                    # Testes unit√°rios
```

## ‚öôÔ∏è Configura√ß√£o

O arquivo `config/config.json` permite personalizar. Consulte o [Guia de Configura√ß√£o](docs/CONFIGURATION_GUIDE.md) para uma refer√™ncia detalhada de todas as op√ß√µes dispon√≠veis.

- **Fontes de dados** e prioridades
- **Categorias** inclu√≠das/exclu√≠das
- **Par√¢metros iCal** (timezone, lembretes, etc.)
- **Links de transmiss√£o** por regi√£o
- **Sistema de logging**

## üé® Interface Visual

O script exibe uma interface colorida com:
- Progress bars em tempo real
- Status de cada fonte de dados
- Contadores de eventos coletados
- Indicadores visuais de sucesso/erro

## üìä Logging e Debug

O sistema de logs avan√ßado oferece monitoramento detalhado e solu√ß√£o de problemas:

- **Logs centralizados** com m√∫ltiplos n√≠veis (DEBUG, INFO, WARNING, ERROR, CRITICAL)
- **Payloads raw** preservados por fonte para an√°lise detalhada
## üìä Logging Avan√ßado

O sistema de logging foi aprimorado com recursos profissionais para facilitar a depura√ß√£o e monitoramento:

### üéØ Recursos Principais

- **Mensagens de Erro Estruturadas**
  - C√≥digos de erro √∫nicos para cada tipo de problema
  - Mensagens claras e acion√°veis
  - Sugest√µes de corre√ß√£o baseadas no contexto

- **Rota√ß√£o Autom√°tica**
  - O arquivo principal de log √© rotacionado a cada execu√ß√£o
  - Logs antigos s√£o armazenados em `logs/rotated_logs/`
  - N√≠veis de log configur√°veis por sa√≠da (console/arquivo)
  - Formata√ß√£o personaliz√°vel para diferentes destinos

- **Limpeza Inteligente**
  - Remo√ß√£o autom√°tica de logs antigos baseada em idade e quantidade
  - Limpeza seletiva por tipo de log (debug, payloads, etc.)
  - Configura√ß√£o flex√≠vel de reten√ß√£o

### ‚öôÔ∏è Configura√ß√£o de Logging

No arquivo `config.json`, voc√™ pode personalizar o comportamento do logging:

```json
"logging": {
  "file_structure": {
    "main_log": "logs/app.log",
    "debug_directory": "logs/debug",
    "payload_directory": "logs/payloads"
  },
  "retention": {
    "enabled": true,
    "max_logs_to_keep": 10,
    "max_payloads_to_keep": 20,
    "delete_older_than_days": 30
  },
  "levels": {
    "console": "INFO",
    "file": "DEBUG",
    "debug_file": "DEBUG"
  },
  "format": {
    "console": "%(message)s",
    "file": "%(asctime)s - %(levelname)s - %(name)s - %(message)s"
  },
  "rotation": {
    "enabled": true,
    "max_size_mb": 10,
    "backup_count": 5
  },
  "payload_settings": {
    "save_raw": true,
    "pretty_print": true,
    "include_headers": true,
    "separate_by_source": true,
    "max_files_per_source": 50,
    "max_age_days": 30
  }
}
```

### üîç C√≥digos de Erro

O sistema utiliza c√≥digos de erro estruturados para facilitar a identifica√ß√£o de problemas:

- **1xx**: Erros de Configura√ß√£o
  - `100`: Configura√ß√£o ausente
  - `101`: Configura√ß√£o inv√°lida
  - `102`: Erro de valida√ß√£o

- **2xx**: Erros de Rede
  - `200`: Falha na requisi√ß√£o HTTP
  - `201**: Timeout de conex√£o
  - `202`: Erro de autentica√ß√£o

- **3xx**: Erros de Processamento
  - `300`: Falha no processamento de dados
  - `301`: Formato de dados inv√°lido
  - `302`: Falha na normaliza√ß√£o

### üì¶ Gerenciamento de Payloads

O sistema agora gerencia automaticamente os arquivos de payload:

- **Rota√ß√£o por quantidade**
  - Mant√©m apenas os N arquivos mais recentes por fonte
  - Configur√°vel via `max_files_per_source`
  - Remove automaticamente os arquivos mais antigos

- **Limpeza por idade**
  - Remove arquivos mais antigos que X dias
  - Configur√°vel via `max_age_days`
  - Aplic√°vel a logs e payloads

- **Organiza√ß√£o**
  - Separa√ß√£o por fonte de dados
  - Nomenclatura consistente de arquivos
  - Metadados inclu√≠dos nos nomes dos arquivos

### üõ†Ô∏è Valida√ß√£o de Configura√ß√£o

A valida√ß√£o de configura√ß√£o foi aprimorada com:

- Verifica√ß√£o de tipos e valores
- Valores padr√£o sensatos
- Mensagens de erro detalhadas
- Sugest√µes de corre√ß√£o
- Valida√ß√£o de caminhos e permiss√µes

### üîÑ Per√≠odos de Sil√™ncio

Configure per√≠odos de sil√™ncio para reduzir notifica√ß√µes em hor√°rios espec√≠ficos:

```json
"silent_periods": [
  {
    "name": "Noite",
    "start_time": "22:00",
    "end_time": "07:00",
    "days_of_week": ["monday", "tuesday", "wednesday", "thursday", "sunday"],
    "enabled": true
  },
  {
    "name": "Fim de Semana",
    "start_time": "00:00",
    "end_time": "08:00",
    "days_of_week": ["friday", "saturday", "sunday"],
    "enabled": true
  }
]
```
  - Mant√©m apenas os logs mais recentes (configur√°vel)
  - Remove automaticamente logs mais antigos que o per√≠odo de reten√ß√£o
  - Configura√ß√£o flex√≠vel de reten√ß√£o
- **Debug completo** para troubleshooting com informa√ß√µes detalhadas

üìò **Documenta√ß√£o Detalhada:** Consulte [LOGGING_AND_CONFIGURATION.md](docs/LOGGING_AND_CONFIGURATION.md) para informa√ß√µes completas sobre configura√ß√£o e personaliza√ß√£o do sistema de logs.

## üåê Fontes de Dados

### Fonte Prim√°ria
- **Tomada de Tempo** (tomadadetempo.com.br) - Prioridade m√°xima
  - Coleta detalhada de programa√ß√£o de TV e internet
  - Suporte a m√∫ltiplas categorias de automobilismo
  - Atualiza√ß√£o em tempo real dos hor√°rios de transmiss√£o

### Fontes Secund√°rias
- **Ergast API** (http://ergast.com/mrd/) - Dados hist√≥ricos e atuais de F1
- **OpenF1 API** (https://openf1.org/) - Alternativa moderna para dados de F1
- **Sites oficiais** das categorias - Para informa√ß√µes diretas das fontes oficiais
- **Motorsport.com** - Cobertura abrangente de m√∫ltiplas categorias
- **Autosport** - Dados confi√°veis sobre automobilismo mundial

> ‚ö†Ô∏è **Nota sobre a Ergast API**: Ser√° descontinuada em 2024. O sistema j√° est√° preparado para a transi√ß√£o para a OpenF1 API.

## üìÖ Importa√ß√£o no Google Calendar

1. Execute o script para gerar o arquivo .ics
2. Abra o Google Calendar
3. Clique em "+" ao lado de "Outros calend√°rios"
4. Selecione "Importar"
5. Fa√ßa upload do arquivo motorsport_events.ics

## üêõ Gerenciamento de Issues

O projeto utiliza um sistema automatizado para gerenciar issues atrav√©s de arquivos JSON. Isso permite:

- ‚úÖ **Rastreabilidade**: Hist√≥rico completo de todas as issues
- ‚úÖ **Consist√™ncia**: Formato padronizado para todas as issues
- ‚úÖ **Automa√ß√£o**: Processo de importa√ß√£o simplificado
- ‚úÖ **Backup**: Hist√≥rico de todas as issues j√° criadas

### üîç Issues Ativas

1. [üêõ Corre√ß√£o na Detec√ß√£o de Eventos sem Data](https://github.com/dmirrha/motorsport-calendar/issues/3)
2. [üêõ Corre√ß√£o na Detec√ß√£o do Final de Semana](https://github.com/dmirrha/motorsport-calendar/issues/5)
3. [‚ú® Aprimoramento na Detec√ß√£o de Categorias](https://github.com/dmirrha/motorsport-calendar/issues/2)
4. [üîß Melhoria no Tratamento de Erros e Logs](https://github.com/dmirrha/motorsport-calendar/issues/4)

### ‚úÖ Issues Conclu√≠das

- [#49 ‚Äî Priorit√°rios Fase 1](https://github.com/dmirrha/motorsport-calendar/issues/49) ‚Äî PR #56 mergeada; issue fechada automaticamente. Rastreabilidade: `docs/issues/closed/issue-49.md`.
- [#64 ‚Äî Backlog Priorit√°rio de Cobertura ‚â•80% (P1‚ÄìP6)](https://github.com/dmirrha/motorsport-calendar/issues/64) ‚Äî conclu√≠da com su√≠te est√°vel 3√ó e documenta√ß√£o sincronizada; PR #73 atualizada.

### üîÑ Fluxo de Trabalho

1. **Criar Nova Issue**:
   - Crie um novo arquivo JSON em `.github/import_issues/`
   - Siga o [formato padr√£o](#-formato-do-arquivo-de-issue)

2. **Importar Issues**:
   ```bash
   # Navegue at√© o diret√≥rio de importa√ß√£o
   cd .github/import_issues/
   
   # Execute o script (ele pedir√° autentica√ß√£o na primeira vez)
   python import_issues.py dmirrha/motorsport-calendar
   ```

3. **Verifica√ß√£o**:
   - As issues importadas s√£o movidas para `imported/` com timestamp
   - Um relat√≥rio detalhado √© exibido no terminal
   - Links para as issues criadas s√£o fornecidos

### üìù Formato do Arquivo de Issue

```json
{
  "title": "T√≠tulo da Issue",
  "body": "Descri√ß√£o detalhada em Markdown...",
  "labels": ["bug", "high priority"],
  "assignees": ["usuario"],
  "milestone": null
}
```

## Contribui√ß√£o

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üß™ Testes

Execute os testes com Pytest (cobertura habilitada por padr√£o via `pytest.ini`).

### Instala√ß√£o das depend√™ncias de desenvolvimento

```bash
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

### Comandos principais

```bash
# Testes unit√°rios com cobertura e relat√≥rios (padr√£o)
pytest

# Apenas testes marcados como unit
pytest -m unit

# Abrir relat√≥rio HTML de cobertura ap√≥s a execu√ß√£o
open htmlcov/index.html  # macOS

# Sa√≠das configuradas
# - Cobertura XML: coverage.xml
# - Cobertura HTML: htmlcov/
# - JUnit XML: test_results/junit.xml
```

Notas:
- Gate de cobertura global: 45% (`--cov-fail-under=45`).
 - Timezone padr√£o dos testes: `America/Sao_Paulo` (fixture autouse em `tests/conftest.py`).
 - Mocks essenciais documentados em `tests/README.md`:
  - TZ e aleatoriedade fixas (fixtures autouse em `tests/conftest.py`).
  - Rede com shims/patches (`patch_requests_get`, `patch_requests_session`).
  - Isolamento de filesystem com `tmp_path`.
  - Vari√°veis de ambiente com `monkeypatch.setenv`/`delenv`.
- Exemplos-pr√°ticos:
  - `tests/unit/utils/test_payload_manager.py`
  - `tests/unit/test_env_vars.py`
  - `tests/unit/sources/base_source/test_make_request.py`
  - `tests/unit/sources/tomada_tempo/test_parse_calendar_page.py`

Para detalhes, veja `tests/README.md`.

## üìù Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo `LICENSE` para detalhes.

## üèÅ Status do Projeto

üöÄ **Vers√£o Est√°vel** - Em produ√ß√£o

### üöÄ √öltimas Atualiza√ß√µes

#### Sistema de Logging Avan√ßado
- üîÑ **Rota√ß√£o autom√°tica** de logs a cada execu√ß√£o
- üóëÔ∏è **Limpeza inteligente** de logs antigos baseada em pol√≠tica de reten√ß√£o
- üìä **Armazenamento organizado** de logs rotacionados
- ‚öôÔ∏è **Configura√ß√£o flex√≠vel** via arquivo JSON

#### Melhorias no Processamento
- üîç Detec√ß√£o aprimorada de eventos do Tomada de Tempo
- üïí Processamento mais preciso de datas e hor√°rios
- üõ†Ô∏è Tratamento de erros aprimorado
- ‚ö° Otimiza√ß√£o de performance

#### Pr√≥ximos Passos Imediatos
- üêõ **Corre√ß√£o cr√≠tica**: Melhorar detec√ß√£o da p√°gina alvo no Tomada de Tempo
- üìÖ Aprimorar associa√ß√£o de eventos sem data expl√≠cita
- üîÑ Expans√£o para mais fontes de dados

### Pr√≥ximos Passos
- Implementa√ß√£o de mais fontes de dados
- Melhorias na detec√ß√£o de categorias
- Suporte a notifica√ß√µes personalizadas
- Interface web para configura√ß√£o e visualiza√ß√£o
- Exporta√ß√£o para outros formatos de calend√°rio

---

**Desenvolvido com ‚ù§Ô∏è para entusiastas do automobilismo**
